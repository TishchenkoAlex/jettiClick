<div class="mat-container mat-elevation-z4" >
    <div class="search-header">
        <md-input-container>
            <input mdInput #filter placeholder="Filter">
        </md-input-container>
        <button md-mini-fab color="default"><md-icon>refresh</md-icon></button>
        <button md-mini-fab color="primary"><md-icon>add</md-icon></button>
        <button md-mini-fab color="default" [disabled]="!this.selection.selected.length"><md-icon>content_copy</md-icon></button>
        <button md-mini-fab color="default"><md-icon>add</md-icon></button>
        <button md-mini-fab color="default"><md-icon>add</md-icon></button>
        <button md-mini-fab color="accent" [disabled]="!this.selection.selected.length"><md-icon>remove</md-icon></button>

    </div>
    <md-table #table [dataSource]="dataSource" mdSort class="mat-table" >
        
        <ng-container cdkColumnDef="select">
            <md-header-cell *cdkHeaderCellDef>
                <md-checkbox (change)="$event ? masterToggle() : null" [checked]="isAllSelected()" [indeterminate]="selection.hasValue() && !isAllSelected()">
                </md-checkbox>
            </md-header-cell>
            <md-cell *cdkCellDef="let row">
                <md-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row.id) : null" [checked]="selection.isSelected(row.id)">
                </md-checkbox>
            </md-cell>
        </ng-container>

        <ng-container cdkColumnDef="posted">
            <md-header-cell *cdkHeaderCellDef></md-header-cell>
            <md-cell *cdkCellDef="let row">
                <md-icon *ngIf="row['deleted']" color="accent">indeterminate_check_box</md-icon>
                <md-icon *ngIf="row['posted']" color="primary">check_box</md-icon>
                <md-icon *ngIf="!row['posted'] && !row['deleted']" color="primary">check_box_outline_blank</md-icon>
            </md-cell>
        </ng-container>

        <ng-container *ngIf="this.docType.startsWith('Document')" cdkColumnDef="date" >
            <md-header-cell *cdkHeaderCellDef md-sort-header> date </md-header-cell>
            <md-cell *cdkCellDef="let row"> {{row.date | date:'dd.MM.yyyy mm:ss'}} </md-cell>
        </ng-container>
        
        <ng-container cdkColumnDef="code">
            <md-header-cell *cdkHeaderCellDef md-sort-header> code </md-header-cell>
            <md-cell *cdkCellDef="let row"> {{row.code}} </md-cell>
        </ng-container>
        
        <ng-container cdkColumnDef="description">
            <md-header-cell *cdkHeaderCellDef md-sort-header> description </md-header-cell>
            <md-cell *cdkCellDef="let row">
                <a href="#"  (click)="$event.stopPropagation();openDialog(row);false"> {{row.description}} </a>
            </md-cell>
        </ng-container>
        
        <ng-container *ngFor="let col of columns" [cdkColumnDef]="col.field">
            <md-header-cell *cdkHeaderCellDef md-sort-header fxShow="false" fxShow.gt-xs style="margin-left: 16px;">{{ col.label }}</md-header-cell>
            <md-cell *cdkCellDef="let row" fxShow="false" fxShow.gt-xs style="margin-left: 16px"> 
                <span [ngSwitch]="col.type">
                    <span *ngSwitchCase = "'string'">
                        {{row[col.field]}} 
                    </span>
                    <span *ngSwitchCase = "'datetime'">
                        {{row[col.field] | date:'dd.MM.yyyy mm:ss'}} 
                    </span>
                    <span *ngSwitchCase = "'date'">
                        {{row[col.field] | date:'dd.MM.yyyy'}} 
                    </span>
                    <span *ngSwitchCase = "'number'">
                        {{row[col.field] | number:'1.2-2' }} 
                    </span>
                    <span *ngSwitchCase = "'boolean'">
                        <md-checkbox [value]="row[col.field]" disabled="true"></md-checkbox>
                    </span>
                    <span *ngSwitchDefault>
                        <span *ngIf="col.type.includes('.')">
                            {{row[col.field].value}} 
                        </span>
                    </span>
                </span>
            </md-cell>
        </ng-container>
        
        <md-header-row *cdkHeaderRowDef="displayedColumns"></md-header-row>
        <md-row *cdkRowDef="let row; columns: displayedColumns;" ></md-row>
    </md-table>
    
    <md-paginator #paginator [length]="this.pageSize" [pageIndex]="0" [pageSize]="pageSize" [pageSizeOptions]="[5, 10, 25, 100]">
    </md-paginator>
    <md-progress-bar mode="indeterminate" *ngIf="dataSource.isLoadingResults"></md-progress-bar>
</div>
